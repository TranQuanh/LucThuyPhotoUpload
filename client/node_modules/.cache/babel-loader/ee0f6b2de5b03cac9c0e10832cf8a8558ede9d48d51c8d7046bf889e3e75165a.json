{"ast":null,"code":"var _jsxFileName = \"/media/quanh/New Volume/Worker/bussiness/UpdatePhotoLucThuy/UpdatePhotoLucThuy/client/src/components/Upload/Upload.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport styles from './Upload.module.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Upload({\n  token\n}) {\n  _s();\n  const [tab, setTab] = useState('phone'); // 'phone' hoặc 'product'\n  const [phone, setPhone] = useState('');\n  const [orders, setOrders] = useState([]);\n  const [selectedOrder, setSelectedOrder] = useState(null);\n  const [orderDetails, setOrderDetails] = useState([]);\n  const [products, setProducts] = useState([]); // [{id, name}]\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const [productCode, setProductCode] = useState(''); // cho tab mã sản phẩm\n  const [photos, setPhotos] = useState([]);\n  const [phoneMessage, setPhoneMessage] = useState('');\n  const [showPhoneMessage, setShowPhoneMessage] = useState(false);\n  const [productMessage, setProductMessage] = useState('');\n  const [showProductMessage, setShowProductMessage] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [orderIdStep, setOrderIdStep] = useState('');\n  const [orderProducts, setOrderProducts] = useState([]); // [{id, name}]\n  const [selectedProducts, setSelectedProducts] = useState([]); // array of product_id\n  const [orderStepMsg, setOrderStepMsg] = useState('');\n\n  // Tra cứu orders theo phone\n  const handleSearchOrders = async () => {\n    setOrders([]);\n    setSelectedOrder(null);\n    setOrderDetails([]);\n    setProducts([]);\n    setSelectedProduct(null);\n    if (!phone) return;\n    setLoading(true);\n    try {\n      const res = await axios.get('http://localhost:5000/api/orders', {\n        params: {\n          phone\n        },\n        withCredentials: true\n      });\n      setOrders(res.data);\n      if (res.data.length === 0) setPhoneMessage('Không tìm thấy đơn hàng nào!');else setPhoneMessage('');\n    } catch (err) {\n      setPhoneMessage('Lỗi tra cứu đơn hàng');\n    }\n    setLoading(false);\n  };\n\n  // Tra cứu order_details theo order_id\n  const handleSelectOrder = async orderId => {\n    setSelectedOrder(orderId);\n    setOrderDetails([]);\n    setProducts([]);\n    setSelectedProduct(null);\n    setLoading(true);\n    try {\n      const res = await axios.get('http://localhost:5000/api/order_details', {\n        params: {\n          order_id: orderId\n        },\n        withCredentials: true\n      });\n      setOrderDetails(res.data);\n      // Lấy thông tin product cho từng order_detail\n      const productPromises = res.data.map(od => axios.get(`http://localhost:5000/api/products/${od.product_id}`, {\n        withCredentials: true\n      }));\n      const productResults = await Promise.all(productPromises);\n      setProducts(productResults.map(r => r.data));\n      setPhoneMessage('');\n    } catch (err) {\n      setPhoneMessage('Lỗi tra cứu sản phẩm');\n    }\n    setLoading(false);\n  };\n\n  // Chọn product\n  const handleSelectProduct = productId => {\n    setSelectedProduct(productId);\n  };\n\n  // Ảnh\n  const handleFileChange = e => {\n    const files = Array.from(e.target.files);\n    setPhotos(prev => [...prev, ...files]);\n    e.target.value = null;\n  };\n  const handleRemovePhoto = index => {\n    setPhotos(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Xóa tất cả ảnh\n  const handleRemoveAllPhotos = () => {\n    setPhotos([]);\n  };\n\n  // Bước chọn mã hợp đồng và lấy sản phẩm\n  const handleOrderIdStepSearch = async () => {\n    setOrderProducts([]);\n    setSelectedProducts([]);\n    setOrderStepMsg('');\n    if (!orderIdStep) return;\n    try {\n      const res = await axios.get('http://localhost:5000/api/order_details', {\n        params: {\n          order_id: orderIdStep\n        },\n        withCredentials: true\n      });\n      const productIds = res.data.map(od => od.product_id);\n      if (productIds.length === 0) {\n        setOrderStepMsg('Không có sản phẩm nào cho hợp đồng này');\n      } else {\n        // Lấy thông tin sản phẩm\n        const productRes = await Promise.all(productIds.map(pid => axios.get(`http://localhost:5000/api/products/${pid}`, {\n          withCredentials: true\n        })));\n        setOrderProducts(productRes.map(r => r.data));\n        setOrderStepMsg('');\n      }\n    } catch (err) {\n      setOrderStepMsg('Không tìm thấy hợp đồng hoặc lỗi kết nối');\n    }\n  };\n  const handleToggleProduct = pid => {\n    setSelectedProducts(prev => prev.includes(pid) ? prev.filter(id => id !== pid) : [...prev, pid]);\n  };\n\n  // Upload\n  const handleSubmit = async e => {\n    e.preventDefault();\n    // Nếu đang ở bước chọn hợp đồng\n    if (orderIdStep && selectedProducts.length > 0) {\n      if (photos.length === 0) {\n        setOrderStepMsg('Vui lòng chọn ảnh');\n        return;\n      }\n      const formData = new FormData();\n      photos.forEach(photo => {\n        formData.append('photos', photo);\n      });\n      selectedProducts.forEach(pid => formData.append('products', pid));\n      formData.append('order_id', orderIdStep);\n      try {\n        await axios.post('http://localhost:5000/api/upload', formData, {\n          withCredentials: true,\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        setOrderStepMsg('Upload thành công!');\n        setPhotos([]);\n        setSelectedProducts([]);\n      } catch (err) {\n        setOrderStepMsg('Upload thất bại');\n      }\n      return;\n    }\n    if (tab === 'phone') {\n      setShowPhoneMessage(false);\n      setPhoneMessage('');\n      if (photos.length === 0 || !selectedProduct || !selectedOrder) {\n        setPhoneMessage('Vui lòng chọn đơn hàng, sản phẩm và ảnh');\n        setShowPhoneMessage(true);\n        return;\n      }\n      const formData = new FormData();\n      photos.forEach(photo => {\n        formData.append('photos', photo);\n      });\n      formData.append('product', selectedProduct);\n      formData.append('order_id', selectedOrder);\n      try {\n        await axios.post('http://localhost:5000/api/upload', formData, {\n          withCredentials: true,\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        setPhoneMessage('Upload thành công!');\n        setShowPhoneMessage(true);\n        setPhotos([]);\n        setSelectedProduct(null);\n        setSelectedOrder(null);\n      } catch (err) {\n        setPhoneMessage('Upload thất bại');\n        setShowPhoneMessage(true);\n      }\n    } else {\n      setShowProductMessage(false);\n      setProductMessage('');\n      if (photos.length === 0 || !productCode) {\n        setProductMessage('Vui lòng nhập mã sản phẩm và chọn ảnh');\n        setShowProductMessage(true);\n        return;\n      }\n      // Kiểm tra mã sản phẩm có tồn tại không\n      try {\n        const res = await axios.get(`http://localhost:5000/api/products/${productCode}`, {\n          withCredentials: true\n        });\n        if (!res.data || !res.data.id) {\n          setProductMessage('Không có sản phẩm');\n          setShowProductMessage(true);\n          return;\n        }\n      } catch (err) {\n        setProductMessage('Không có sản phẩm');\n        setShowProductMessage(true);\n        return;\n      }\n      const formData = new FormData();\n      photos.forEach(photo => {\n        formData.append('photos', photo);\n      });\n      formData.append('product', productCode);\n      try {\n        await axios.post('http://localhost:5000/api/upload', formData, {\n          withCredentials: true,\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        setProductMessage('Upload thành công!');\n        setShowProductMessage(true);\n        setPhotos([]);\n        setProductCode('');\n      } catch (err) {\n        setProductMessage('Upload thất bại');\n        setShowProductMessage(true);\n      }\n    }\n  };\n\n  // Ẩn thông báo khi thao tác lại trên input hoặc chọn lại\n  const handlePhoneInputChange = e => {\n    setPhone(e.target.value);\n    setShowPhoneMessage(false);\n  };\n  const handleProductCodeChange = e => {\n    setProductCode(e.target.value);\n    setShowProductMessage(false);\n  };\n  const handleSearchOrdersWrapper = () => {\n    setShowPhoneMessage(false);\n    handleSearchOrders();\n  };\n  const handleSelectOrderWrapper = orderId => {\n    setShowPhoneMessage(false);\n    handleSelectOrder(orderId);\n  };\n  const handleSelectProductWrapper = productId => {\n    setShowPhoneMessage(false);\n    handleSelectProduct(productId);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.uploadContainer,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.uploadTitle,\n      children: \"Upload \\u1EA2nh\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.tabBar,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: tab === 'phone' ? `${styles.tabBtn} ${styles.selectedTab}` : styles.tabBtn,\n        onClick: () => setTab('phone'),\n        children: \"Theo S\\u0110T\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: tab === 'product' ? `${styles.tabBtn} ${styles.selectedTab}` : styles.tabBtn,\n        onClick: () => setTab('product'),\n        children: \"Theo m\\xE3 s\\u1EA3n ph\\u1EA9m\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this), tab === 'phone' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.uploadRow,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: `${styles.inputText} ${styles.uploadInput}`,\n          placeholder: \"Nh\\u1EADp s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i kh\\xE1ch h\\xE0ng\",\n          value: phone,\n          onChange: handlePhoneInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.uploadBtn,\n          type: \"button\",\n          onClick: handleSearchOrdersWrapper,\n          disabled: loading,\n          children: \"Tra c\\u1EE9u \\u0111\\u01A1n h\\xE0ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }, this), orders.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 6,\n            fontWeight: 500\n          },\n          children: \"Ch\\u1ECDn m\\xE3 \\u0111\\u01A1n h\\xE0ng:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexWrap: 'wrap',\n            gap: 8\n          },\n          children: orders.map(order => /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: selectedOrder === order.id ? `${styles.selectedBtn} ${styles.uploadBtn}` : styles.uploadBtn,\n            onClick: () => handleSelectOrderWrapper(order.id),\n            children: order.id\n          }, order.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 13\n      }, this), products.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 6,\n            fontWeight: 500\n          },\n          children: \"Ch\\u1ECDn s\\u1EA3n ph\\u1EA9m:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexWrap: 'wrap',\n            gap: 8\n          },\n          children: products.map(product => /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: selectedProduct === product.id ? `${styles.selectedBtn} ${styles.uploadBtn}` : styles.uploadBtn,\n            onClick: () => handleSelectProductWrapper(product.id),\n            children: product.id\n          }, product.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true), tab === 'product' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.uploadRow,\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        className: `${styles.inputText} ${styles.uploadInput}`,\n        placeholder: \"Nh\\u1EADp m\\xE3 s\\u1EA3n ph\\u1EA9m\",\n        value: productCode,\n        onChange: handleProductCodeChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.uploadRow,\n      style: {\n        marginBottom: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: `${styles.inputText} ${styles.uploadInput}`,\n        placeholder: \"Nh\\u1EADp m\\xE3 h\\u1EE3p \\u0111\\u1ED3ng \\u0111\\u1EC3 ch\\u1ECDn s\\u1EA3n ph\\u1EA9m\",\n        value: orderIdStep,\n        onChange: e => setOrderIdStep(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.uploadBtn,\n        type: \"button\",\n        onClick: handleOrderIdStepSearch,\n        children: \"Tra c\\u1EE9u h\\u1EE3p \\u0111\\u1ED3ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 7\n    }, this), orderStepMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.uploadMessage,\n      children: orderStepMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 24\n    }, this), orderProducts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 6,\n          fontWeight: 500\n        },\n        children: \"Ch\\u1ECDn s\\u1EA3n ph\\u1EA9m thu\\u1ED9c h\\u1EE3p \\u0111\\u1ED3ng:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexWrap: 'wrap',\n          gap: 10\n        },\n        children: orderProducts.map(product => /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 4,\n            background: '#f0f4fa',\n            borderRadius: 6,\n            padding: '4px 10px',\n            cursor: 'pointer'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: selectedProducts.includes(product.id),\n            onChange: () => handleToggleProduct(product.id),\n            style: {\n              accentColor: '#1976d2'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [product.id, \" - \", product.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 17\n          }, this)]\n        }, product.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 9\n    }, this), orderIdStep && selectedProducts.length > 0 && /*#__PURE__*/_jsxDEV(\"form\", {\n      className: styles.uploadForm,\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.uploadDivider\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.uploadRow,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          multiple: true,\n          style: {\n            display: 'none'\n          },\n          id: \"file-upload\",\n          onChange: handleFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"file-upload\",\n          className: styles.chooseFileLabel,\n          children: \"Ch\\u1ECDn \\u1EA3nh\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }, this), photos.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleRemoveAllPhotos,\n          className: styles.removeAllBtn,\n          children: \"X\\xF3a t\\u1EA5t c\\u1EA3 \\u1EA3nh\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 11\n      }, this), photos.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: styles.photoList,\n        children: photos.map((photo, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: styles.photoItem,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: URL.createObjectURL(photo),\n            alt: photo.name,\n            className: styles.photoThumb\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => handleRemovePhoto(idx),\n            className: styles.removePhotoBtn,\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 19\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.uploadBtn,\n        type: \"submit\",\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 9\n    }, this), tab === 'phone' && showPhoneMessage && phoneMessage && (phoneMessage.includes('thành công') ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.uploadSuccess,\n      children: phoneMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.uploadMessage,\n      children: phoneMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 11\n    }, this)), tab === 'product' && showProductMessage && productMessage && (productMessage.includes('thành công') ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.uploadSuccess,\n      children: productMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.uploadMessage,\n      children: productMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 11\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 238,\n    columnNumber: 5\n  }, this);\n}\n_s(Upload, \"9Jn8k6cpk6prGN8WCEAd/yekxq0=\");\n_c = Upload;\nexport default Upload;\nvar _c;\n$RefreshReg$(_c, \"Upload\");","map":{"version":3,"names":["React","useState","axios","styles","jsxDEV","_jsxDEV","Fragment","_Fragment","Upload","token","_s","tab","setTab","phone","setPhone","orders","setOrders","selectedOrder","setSelectedOrder","orderDetails","setOrderDetails","products","setProducts","selectedProduct","setSelectedProduct","productCode","setProductCode","photos","setPhotos","phoneMessage","setPhoneMessage","showPhoneMessage","setShowPhoneMessage","productMessage","setProductMessage","showProductMessage","setShowProductMessage","loading","setLoading","orderIdStep","setOrderIdStep","orderProducts","setOrderProducts","selectedProducts","setSelectedProducts","orderStepMsg","setOrderStepMsg","handleSearchOrders","res","get","params","withCredentials","data","length","err","handleSelectOrder","orderId","order_id","productPromises","map","od","product_id","productResults","Promise","all","r","handleSelectProduct","productId","handleFileChange","e","files","Array","from","target","prev","value","handleRemovePhoto","index","filter","_","i","handleRemoveAllPhotos","handleOrderIdStepSearch","productIds","productRes","pid","handleToggleProduct","includes","id","handleSubmit","preventDefault","formData","FormData","forEach","photo","append","post","headers","handlePhoneInputChange","handleProductCodeChange","handleSearchOrdersWrapper","handleSelectOrderWrapper","handleSelectProductWrapper","className","uploadContainer","children","uploadTitle","fileName","_jsxFileName","lineNumber","columnNumber","tabBar","type","tabBtn","selectedTab","onClick","uploadRow","inputText","uploadInput","placeholder","onChange","uploadBtn","disabled","style","marginBottom","fontWeight","display","flexWrap","gap","order","selectedBtn","product","uploadMessage","alignItems","background","borderRadius","padding","cursor","checked","accentColor","name","uploadForm","onSubmit","uploadDivider","accept","multiple","htmlFor","chooseFileLabel","removeAllBtn","photoList","idx","photoItem","src","URL","createObjectURL","alt","photoThumb","removePhotoBtn","uploadSuccess","_c","$RefreshReg$"],"sources":["/media/quanh/New Volume/Worker/bussiness/UpdatePhotoLucThuy/UpdatePhotoLucThuy/client/src/components/Upload/Upload.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport styles from './Upload.module.css';\n\nfunction Upload({ token }) {\n  const [tab, setTab] = useState('phone'); // 'phone' hoặc 'product'\n  const [phone, setPhone] = useState('');\n  const [orders, setOrders] = useState([]);\n  const [selectedOrder, setSelectedOrder] = useState(null);\n  const [orderDetails, setOrderDetails] = useState([]);\n  const [products, setProducts] = useState([]); // [{id, name}]\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const [productCode, setProductCode] = useState(''); // cho tab mã sản phẩm\n  const [photos, setPhotos] = useState([]);\n  const [phoneMessage, setPhoneMessage] = useState('');\n  const [showPhoneMessage, setShowPhoneMessage] = useState(false);\n  const [productMessage, setProductMessage] = useState('');\n  const [showProductMessage, setShowProductMessage] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [orderIdStep, setOrderIdStep] = useState('');\n  const [orderProducts, setOrderProducts] = useState([]); // [{id, name}]\n  const [selectedProducts, setSelectedProducts] = useState([]); // array of product_id\n  const [orderStepMsg, setOrderStepMsg] = useState('');\n\n  // Tra cứu orders theo phone\n  const handleSearchOrders = async () => {\n    setOrders([]);\n    setSelectedOrder(null);\n    setOrderDetails([]);\n    setProducts([]);\n    setSelectedProduct(null);\n    if (!phone) return;\n    setLoading(true);\n    try {\n      const res = await axios.get('http://localhost:5000/api/orders', { params: { phone }, withCredentials: true });\n      setOrders(res.data);\n      if (res.data.length === 0) setPhoneMessage('Không tìm thấy đơn hàng nào!');\n      else setPhoneMessage('');\n    } catch (err) {\n      setPhoneMessage('Lỗi tra cứu đơn hàng');\n    }\n    setLoading(false);\n  };\n\n  // Tra cứu order_details theo order_id\n  const handleSelectOrder = async (orderId) => {\n    setSelectedOrder(orderId);\n    setOrderDetails([]);\n    setProducts([]);\n    setSelectedProduct(null);\n    setLoading(true);\n    try {\n      const res = await axios.get('http://localhost:5000/api/order_details', { params: { order_id: orderId }, withCredentials: true });\n      setOrderDetails(res.data);\n      // Lấy thông tin product cho từng order_detail\n      const productPromises = res.data.map(od => axios.get(`http://localhost:5000/api/products/${od.product_id}`, { withCredentials: true }));\n      const productResults = await Promise.all(productPromises);\n      setProducts(productResults.map(r => r.data));\n      setPhoneMessage('');\n    } catch (err) {\n      setPhoneMessage('Lỗi tra cứu sản phẩm');\n    }\n    setLoading(false);\n  };\n\n  // Chọn product\n  const handleSelectProduct = (productId) => {\n    setSelectedProduct(productId);\n  };\n\n  // Ảnh\n  const handleFileChange = (e) => {\n    const files = Array.from(e.target.files);\n    setPhotos(prev => [...prev, ...files]);\n    e.target.value = null;\n  };\n  const handleRemovePhoto = (index) => {\n    setPhotos(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Xóa tất cả ảnh\n  const handleRemoveAllPhotos = () => {\n    setPhotos([]);\n  };\n\n  // Bước chọn mã hợp đồng và lấy sản phẩm\n  const handleOrderIdStepSearch = async () => {\n    setOrderProducts([]);\n    setSelectedProducts([]);\n    setOrderStepMsg('');\n    if (!orderIdStep) return;\n    try {\n      const res = await axios.get('http://localhost:5000/api/order_details', { params: { order_id: orderIdStep }, withCredentials: true });\n      const productIds = res.data.map(od => od.product_id);\n      if (productIds.length === 0) {\n        setOrderStepMsg('Không có sản phẩm nào cho hợp đồng này');\n      } else {\n        // Lấy thông tin sản phẩm\n        const productRes = await Promise.all(productIds.map(pid => axios.get(`http://localhost:5000/api/products/${pid}`, { withCredentials: true })));\n        setOrderProducts(productRes.map(r => r.data));\n        setOrderStepMsg('');\n      }\n    } catch (err) {\n      setOrderStepMsg('Không tìm thấy hợp đồng hoặc lỗi kết nối');\n    }\n  };\n  const handleToggleProduct = (pid) => {\n    setSelectedProducts(prev => prev.includes(pid) ? prev.filter(id => id !== pid) : [...prev, pid]);\n  };\n\n  // Upload\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    // Nếu đang ở bước chọn hợp đồng\n    if (orderIdStep && selectedProducts.length > 0) {\n      if (photos.length === 0) {\n        setOrderStepMsg('Vui lòng chọn ảnh');\n        return;\n      }\n      const formData = new FormData();\n      photos.forEach(photo => {\n        formData.append('photos', photo);\n      });\n      selectedProducts.forEach(pid => formData.append('products', pid));\n      formData.append('order_id', orderIdStep);\n      try {\n        await axios.post('http://localhost:5000/api/upload', formData, {\n          withCredentials: true,\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        });\n        setOrderStepMsg('Upload thành công!');\n        setPhotos([]);\n        setSelectedProducts([]);\n      } catch (err) {\n        setOrderStepMsg('Upload thất bại');\n      }\n      return;\n    }\n    if (tab === 'phone') {\n      setShowPhoneMessage(false);\n      setPhoneMessage('');\n      if (photos.length === 0 || !selectedProduct || !selectedOrder) {\n        setPhoneMessage('Vui lòng chọn đơn hàng, sản phẩm và ảnh');\n        setShowPhoneMessage(true);\n        return;\n      }\n      const formData = new FormData();\n      photos.forEach(photo => {\n        formData.append('photos', photo);\n      });\n      formData.append('product', selectedProduct);\n      formData.append('order_id', selectedOrder);\n      try {\n        await axios.post('http://localhost:5000/api/upload', formData, {\n          withCredentials: true,\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        });\n        setPhoneMessage('Upload thành công!');\n        setShowPhoneMessage(true);\n        setPhotos([]);\n        setSelectedProduct(null);\n        setSelectedOrder(null);\n      } catch (err) {\n        setPhoneMessage('Upload thất bại');\n        setShowPhoneMessage(true);\n      }\n    } else {\n      setShowProductMessage(false);\n      setProductMessage('');\n      if (photos.length === 0 || !productCode) {\n        setProductMessage('Vui lòng nhập mã sản phẩm và chọn ảnh');\n        setShowProductMessage(true);\n        return;\n      }\n      // Kiểm tra mã sản phẩm có tồn tại không\n      try {\n        const res = await axios.get(`http://localhost:5000/api/products/${productCode}`, { withCredentials: true });\n        if (!res.data || !res.data.id) {\n          setProductMessage('Không có sản phẩm');\n          setShowProductMessage(true);\n          return;\n        }\n      } catch (err) {\n        setProductMessage('Không có sản phẩm');\n        setShowProductMessage(true);\n        return;\n      }\n      const formData = new FormData();\n      photos.forEach(photo => {\n        formData.append('photos', photo);\n      });\n      formData.append('product', productCode);\n      try {\n        await axios.post('http://localhost:5000/api/upload', formData, {\n          withCredentials: true,\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        });\n        setProductMessage('Upload thành công!');\n        setShowProductMessage(true);\n        setPhotos([]);\n        setProductCode('');\n      } catch (err) {\n        setProductMessage('Upload thất bại');\n        setShowProductMessage(true);\n      }\n    }\n  };\n\n  // Ẩn thông báo khi thao tác lại trên input hoặc chọn lại\n  const handlePhoneInputChange = (e) => {\n    setPhone(e.target.value);\n    setShowPhoneMessage(false);\n  };\n  const handleProductCodeChange = (e) => {\n    setProductCode(e.target.value);\n    setShowProductMessage(false);\n  };\n  const handleSearchOrdersWrapper = () => {\n    setShowPhoneMessage(false);\n    handleSearchOrders();\n  };\n  const handleSelectOrderWrapper = (orderId) => {\n    setShowPhoneMessage(false);\n    handleSelectOrder(orderId);\n  };\n  const handleSelectProductWrapper = (productId) => {\n    setShowPhoneMessage(false);\n    handleSelectProduct(productId);\n  };\n\n  return (\n    <div className={styles.uploadContainer}>\n      <div className={styles.uploadTitle}>Upload Ảnh</div>\n      {/* Tabs */}\n      <div className={styles.tabBar}>\n        <button\n          type=\"button\"\n          className={tab === 'phone' ? `${styles.tabBtn} ${styles.selectedTab}` : styles.tabBtn}\n          onClick={() => setTab('phone')}\n        >\n          Theo SĐT\n        </button>\n        <button\n          type=\"button\"\n          className={tab === 'product' ? `${styles.tabBtn} ${styles.selectedTab}` : styles.tabBtn}\n          onClick={() => setTab('product')}\n        >\n          Theo mã sản phẩm\n        </button>\n      </div>\n      {/* Tab theo SĐT */}\n      {tab === 'phone' && (\n        <>\n          <div className={styles.uploadRow}>\n            <input\n              className={`${styles.inputText} ${styles.uploadInput}`}\n              placeholder=\"Nhập số điện thoại khách hàng\"\n              value={phone}\n              onChange={handlePhoneInputChange}\n            />\n            <button className={styles.uploadBtn} type=\"button\" onClick={handleSearchOrdersWrapper} disabled={loading}>\n              Tra cứu đơn hàng\n            </button>\n          </div>\n          {orders.length > 0 && (\n            <div style={{ marginBottom: 16 }}>\n              <div style={{ marginBottom: 6, fontWeight: 500 }}>Chọn mã đơn hàng:</div>\n              <div style={{ display: 'flex', flexWrap: 'wrap', gap: 8 }}>\n                {orders.map(order => (\n                  <button\n                    key={order.id}\n                    type=\"button\"\n                    className={selectedOrder === order.id ? `${styles.selectedBtn} ${styles.uploadBtn}` : styles.uploadBtn}\n                    onClick={() => handleSelectOrderWrapper(order.id)}\n                  >\n                    {order.id}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n          {products.length > 0 && (\n            <div style={{ marginBottom: 16 }}>\n              <div style={{ marginBottom: 6, fontWeight: 500 }}>Chọn sản phẩm:</div>\n              <div style={{ display: 'flex', flexWrap: 'wrap', gap: 8 }}>\n                {products.map(product => (\n                  <button\n                    key={product.id}\n                    type=\"button\"\n                    className={selectedProduct === product.id ? `${styles.selectedBtn} ${styles.uploadBtn}` : styles.uploadBtn}\n                    onClick={() => handleSelectProductWrapper(product.id)}\n                  >\n                    {product.id}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n        </>\n      )}\n      {/* Tab theo mã sản phẩm */}\n      {tab === 'product' && (\n        <div className={styles.uploadRow}>\n          <input\n            className={`${styles.inputText} ${styles.uploadInput}`}\n            placeholder=\"Nhập mã sản phẩm\"\n            value={productCode}\n            onChange={handleProductCodeChange}\n          />\n        </div>\n      )}\n      {/* Bước chọn mã hợp đồng và sản phẩm */}\n      <div className={styles.uploadRow} style={{ marginBottom: 10 }}>\n        <input\n          className={`${styles.inputText} ${styles.uploadInput}`}\n          placeholder=\"Nhập mã hợp đồng để chọn sản phẩm\"\n          value={orderIdStep}\n          onChange={e => setOrderIdStep(e.target.value)}\n        />\n        <button className={styles.uploadBtn} type=\"button\" onClick={handleOrderIdStepSearch}>\n          Tra cứu hợp đồng\n        </button>\n      </div>\n      {orderStepMsg && <div className={styles.uploadMessage}>{orderStepMsg}</div>}\n      {orderProducts.length > 0 && (\n        <div style={{ marginBottom: 16 }}>\n          <div style={{ marginBottom: 6, fontWeight: 500 }}>Chọn sản phẩm thuộc hợp đồng:</div>\n          <div style={{ display: 'flex', flexWrap: 'wrap', gap: 10 }}>\n            {orderProducts.map(product => (\n              <label key={product.id} style={{ display: 'flex', alignItems: 'center', gap: 4, background: '#f0f4fa', borderRadius: 6, padding: '4px 10px', cursor: 'pointer' }}>\n                <input\n                  type=\"checkbox\"\n                  checked={selectedProducts.includes(product.id)}\n                  onChange={() => handleToggleProduct(product.id)}\n                  style={{ accentColor: '#1976d2' }}\n                />\n                <span>{product.id} - {product.name}</span>\n              </label>\n            ))}\n          </div>\n        </div>\n      )}\n      {/* Form upload ảnh cho bước này */}\n      {orderIdStep && selectedProducts.length > 0 && (\n        <form className={styles.uploadForm} onSubmit={handleSubmit}>\n          <div className={styles.uploadDivider}></div>\n          <div className={styles.uploadRow}>\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              multiple\n              style={{ display: 'none' }}\n              id=\"file-upload\"\n              onChange={handleFileChange}\n            />\n            <label htmlFor=\"file-upload\" className={styles.chooseFileLabel}>\n              Chọn ảnh\n            </label>\n            {photos.length > 0 && (\n              <button\n                type=\"button\"\n                onClick={handleRemoveAllPhotos}\n                className={styles.removeAllBtn}\n              >\n                Xóa tất cả ảnh\n              </button>\n            )}\n          </div>\n          {photos.length > 0 && (\n            <ul className={styles.photoList}>\n              {photos.map((photo, idx) => (\n                <li key={idx} className={styles.photoItem}>\n                  <img\n                    src={URL.createObjectURL(photo)}\n                    alt={photo.name}\n                    className={styles.photoThumb}\n                  />\n                  <button type=\"button\" onClick={() => handleRemovePhoto(idx)} className={styles.removePhotoBtn}>X</button>\n                </li>\n              ))}\n            </ul>\n          )}\n          <button className={styles.uploadBtn} type=\"submit\">Upload</button>\n        </form>\n      )}\n      {/* Thông báo lỗi/thành công riêng cho từng tab */}\n      {tab === 'phone' && showPhoneMessage && phoneMessage && (\n        phoneMessage.includes('thành công') ? (\n          <div className={styles.uploadSuccess}>{phoneMessage}</div>\n        ) : (\n          <div className={styles.uploadMessage}>{phoneMessage}</div>\n        )\n      )}\n      {tab === 'product' && showProductMessage && productMessage && (\n        productMessage.includes('thành công') ? (\n          <div className={styles.uploadSuccess}>{productMessage}</div>\n        ) : (\n          <div className={styles.uploadMessage}>{productMessage}</div>\n        )\n      )}\n    </div>\n  );\n}\n\nexport default Upload; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,qBAAqB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEzC,SAASC,MAAMA,CAAC;EAAEC;AAAM,CAAC,EAAE;EAAAC,EAAA;EACzB,MAAM,CAACC,GAAG,EAAEC,MAAM,CAAC,GAAGX,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;EACzC,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACc,MAAM,EAAEC,SAAS,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACgB,aAAa,EAAEC,gBAAgB,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACkB,YAAY,EAAEC,eAAe,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACoB,QAAQ,EAAEC,WAAW,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAC9C,MAAM,CAACsB,eAAe,EAAEC,kBAAkB,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EAC5D,MAAM,CAACwB,WAAW,EAAEC,cAAc,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EACpD,MAAM,CAAC0B,MAAM,EAAEC,SAAS,CAAC,GAAG3B,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAAC4B,YAAY,EAAEC,eAAe,CAAC,GAAG7B,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAAC8B,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG/B,QAAQ,CAAC,KAAK,CAAC;EAC/D,MAAM,CAACgC,cAAc,EAAEC,iBAAiB,CAAC,GAAGjC,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACkC,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGnC,QAAQ,CAAC,KAAK,CAAC;EACnE,MAAM,CAACoC,OAAO,EAAEC,UAAU,CAAC,GAAGrC,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACsC,WAAW,EAAEC,cAAc,CAAC,GAAGvC,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACwC,aAAa,EAAEC,gBAAgB,CAAC,GAAGzC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EACxD,MAAM,CAAC0C,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG3C,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAC9D,MAAM,CAAC4C,YAAY,EAAEC,eAAe,CAAC,GAAG7C,QAAQ,CAAC,EAAE,CAAC;;EAEpD;EACA,MAAM8C,kBAAkB,GAAG,MAAAA,CAAA,KAAY;IACrC/B,SAAS,CAAC,EAAE,CAAC;IACbE,gBAAgB,CAAC,IAAI,CAAC;IACtBE,eAAe,CAAC,EAAE,CAAC;IACnBE,WAAW,CAAC,EAAE,CAAC;IACfE,kBAAkB,CAAC,IAAI,CAAC;IACxB,IAAI,CAACX,KAAK,EAAE;IACZyB,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAMU,GAAG,GAAG,MAAM9C,KAAK,CAAC+C,GAAG,CAAC,kCAAkC,EAAE;QAAEC,MAAM,EAAE;UAAErC;QAAM,CAAC;QAAEsC,eAAe,EAAE;MAAK,CAAC,CAAC;MAC7GnC,SAAS,CAACgC,GAAG,CAACI,IAAI,CAAC;MACnB,IAAIJ,GAAG,CAACI,IAAI,CAACC,MAAM,KAAK,CAAC,EAAEvB,eAAe,CAAC,8BAA8B,CAAC,CAAC,KACtEA,eAAe,CAAC,EAAE,CAAC;IAC1B,CAAC,CAAC,OAAOwB,GAAG,EAAE;MACZxB,eAAe,CAAC,sBAAsB,CAAC;IACzC;IACAQ,UAAU,CAAC,KAAK,CAAC;EACnB,CAAC;;EAED;EACA,MAAMiB,iBAAiB,GAAG,MAAOC,OAAO,IAAK;IAC3CtC,gBAAgB,CAACsC,OAAO,CAAC;IACzBpC,eAAe,CAAC,EAAE,CAAC;IACnBE,WAAW,CAAC,EAAE,CAAC;IACfE,kBAAkB,CAAC,IAAI,CAAC;IACxBc,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAMU,GAAG,GAAG,MAAM9C,KAAK,CAAC+C,GAAG,CAAC,yCAAyC,EAAE;QAAEC,MAAM,EAAE;UAAEO,QAAQ,EAAED;QAAQ,CAAC;QAAEL,eAAe,EAAE;MAAK,CAAC,CAAC;MAChI/B,eAAe,CAAC4B,GAAG,CAACI,IAAI,CAAC;MACzB;MACA,MAAMM,eAAe,GAAGV,GAAG,CAACI,IAAI,CAACO,GAAG,CAACC,EAAE,IAAI1D,KAAK,CAAC+C,GAAG,CAAC,sCAAsCW,EAAE,CAACC,UAAU,EAAE,EAAE;QAAEV,eAAe,EAAE;MAAK,CAAC,CAAC,CAAC;MACvI,MAAMW,cAAc,GAAG,MAAMC,OAAO,CAACC,GAAG,CAACN,eAAe,CAAC;MACzDpC,WAAW,CAACwC,cAAc,CAACH,GAAG,CAACM,CAAC,IAAIA,CAAC,CAACb,IAAI,CAAC,CAAC;MAC5CtB,eAAe,CAAC,EAAE,CAAC;IACrB,CAAC,CAAC,OAAOwB,GAAG,EAAE;MACZxB,eAAe,CAAC,sBAAsB,CAAC;IACzC;IACAQ,UAAU,CAAC,KAAK,CAAC;EACnB,CAAC;;EAED;EACA,MAAM4B,mBAAmB,GAAIC,SAAS,IAAK;IACzC3C,kBAAkB,CAAC2C,SAAS,CAAC;EAC/B,CAAC;;EAED;EACA,MAAMC,gBAAgB,GAAIC,CAAC,IAAK;IAC9B,MAAMC,KAAK,GAAGC,KAAK,CAACC,IAAI,CAACH,CAAC,CAACI,MAAM,CAACH,KAAK,CAAC;IACxC1C,SAAS,CAAC8C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE,GAAGJ,KAAK,CAAC,CAAC;IACtCD,CAAC,CAACI,MAAM,CAACE,KAAK,GAAG,IAAI;EACvB,CAAC;EACD,MAAMC,iBAAiB,GAAIC,KAAK,IAAK;IACnCjD,SAAS,CAAC8C,IAAI,IAAIA,IAAI,CAACI,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,KAAKH,KAAK,CAAC,CAAC;EACvD,CAAC;;EAED;EACA,MAAMI,qBAAqB,GAAGA,CAAA,KAAM;IAClCrD,SAAS,CAAC,EAAE,CAAC;EACf,CAAC;;EAED;EACA,MAAMsD,uBAAuB,GAAG,MAAAA,CAAA,KAAY;IAC1CxC,gBAAgB,CAAC,EAAE,CAAC;IACpBE,mBAAmB,CAAC,EAAE,CAAC;IACvBE,eAAe,CAAC,EAAE,CAAC;IACnB,IAAI,CAACP,WAAW,EAAE;IAClB,IAAI;MACF,MAAMS,GAAG,GAAG,MAAM9C,KAAK,CAAC+C,GAAG,CAAC,yCAAyC,EAAE;QAAEC,MAAM,EAAE;UAAEO,QAAQ,EAAElB;QAAY,CAAC;QAAEY,eAAe,EAAE;MAAK,CAAC,CAAC;MACpI,MAAMgC,UAAU,GAAGnC,GAAG,CAACI,IAAI,CAACO,GAAG,CAACC,EAAE,IAAIA,EAAE,CAACC,UAAU,CAAC;MACpD,IAAIsB,UAAU,CAAC9B,MAAM,KAAK,CAAC,EAAE;QAC3BP,eAAe,CAAC,wCAAwC,CAAC;MAC3D,CAAC,MAAM;QACL;QACA,MAAMsC,UAAU,GAAG,MAAMrB,OAAO,CAACC,GAAG,CAACmB,UAAU,CAACxB,GAAG,CAAC0B,GAAG,IAAInF,KAAK,CAAC+C,GAAG,CAAC,sCAAsCoC,GAAG,EAAE,EAAE;UAAElC,eAAe,EAAE;QAAK,CAAC,CAAC,CAAC,CAAC;QAC9IT,gBAAgB,CAAC0C,UAAU,CAACzB,GAAG,CAACM,CAAC,IAAIA,CAAC,CAACb,IAAI,CAAC,CAAC;QAC7CN,eAAe,CAAC,EAAE,CAAC;MACrB;IACF,CAAC,CAAC,OAAOQ,GAAG,EAAE;MACZR,eAAe,CAAC,0CAA0C,CAAC;IAC7D;EACF,CAAC;EACD,MAAMwC,mBAAmB,GAAID,GAAG,IAAK;IACnCzC,mBAAmB,CAAC8B,IAAI,IAAIA,IAAI,CAACa,QAAQ,CAACF,GAAG,CAAC,GAAGX,IAAI,CAACI,MAAM,CAACU,EAAE,IAAIA,EAAE,KAAKH,GAAG,CAAC,GAAG,CAAC,GAAGX,IAAI,EAAEW,GAAG,CAAC,CAAC;EAClG,CAAC;;EAED;EACA,MAAMI,YAAY,GAAG,MAAOpB,CAAC,IAAK;IAChCA,CAAC,CAACqB,cAAc,CAAC,CAAC;IAClB;IACA,IAAInD,WAAW,IAAII,gBAAgB,CAACU,MAAM,GAAG,CAAC,EAAE;MAC9C,IAAI1B,MAAM,CAAC0B,MAAM,KAAK,CAAC,EAAE;QACvBP,eAAe,CAAC,mBAAmB,CAAC;QACpC;MACF;MACA,MAAM6C,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BjE,MAAM,CAACkE,OAAO,CAACC,KAAK,IAAI;QACtBH,QAAQ,CAACI,MAAM,CAAC,QAAQ,EAAED,KAAK,CAAC;MAClC,CAAC,CAAC;MACFnD,gBAAgB,CAACkD,OAAO,CAACR,GAAG,IAAIM,QAAQ,CAACI,MAAM,CAAC,UAAU,EAAEV,GAAG,CAAC,CAAC;MACjEM,QAAQ,CAACI,MAAM,CAAC,UAAU,EAAExD,WAAW,CAAC;MACxC,IAAI;QACF,MAAMrC,KAAK,CAAC8F,IAAI,CAAC,kCAAkC,EAAEL,QAAQ,EAAE;UAC7DxC,eAAe,EAAE,IAAI;UACrB8C,OAAO,EAAE;YACP,cAAc,EAAE;UAClB;QACF,CAAC,CAAC;QACFnD,eAAe,CAAC,oBAAoB,CAAC;QACrClB,SAAS,CAAC,EAAE,CAAC;QACbgB,mBAAmB,CAAC,EAAE,CAAC;MACzB,CAAC,CAAC,OAAOU,GAAG,EAAE;QACZR,eAAe,CAAC,iBAAiB,CAAC;MACpC;MACA;IACF;IACA,IAAInC,GAAG,KAAK,OAAO,EAAE;MACnBqB,mBAAmB,CAAC,KAAK,CAAC;MAC1BF,eAAe,CAAC,EAAE,CAAC;MACnB,IAAIH,MAAM,CAAC0B,MAAM,KAAK,CAAC,IAAI,CAAC9B,eAAe,IAAI,CAACN,aAAa,EAAE;QAC7Da,eAAe,CAAC,yCAAyC,CAAC;QAC1DE,mBAAmB,CAAC,IAAI,CAAC;QACzB;MACF;MACA,MAAM2D,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BjE,MAAM,CAACkE,OAAO,CAACC,KAAK,IAAI;QACtBH,QAAQ,CAACI,MAAM,CAAC,QAAQ,EAAED,KAAK,CAAC;MAClC,CAAC,CAAC;MACFH,QAAQ,CAACI,MAAM,CAAC,SAAS,EAAExE,eAAe,CAAC;MAC3CoE,QAAQ,CAACI,MAAM,CAAC,UAAU,EAAE9E,aAAa,CAAC;MAC1C,IAAI;QACF,MAAMf,KAAK,CAAC8F,IAAI,CAAC,kCAAkC,EAAEL,QAAQ,EAAE;UAC7DxC,eAAe,EAAE,IAAI;UACrB8C,OAAO,EAAE;YACP,cAAc,EAAE;UAClB;QACF,CAAC,CAAC;QACFnE,eAAe,CAAC,oBAAoB,CAAC;QACrCE,mBAAmB,CAAC,IAAI,CAAC;QACzBJ,SAAS,CAAC,EAAE,CAAC;QACbJ,kBAAkB,CAAC,IAAI,CAAC;QACxBN,gBAAgB,CAAC,IAAI,CAAC;MACxB,CAAC,CAAC,OAAOoC,GAAG,EAAE;QACZxB,eAAe,CAAC,iBAAiB,CAAC;QAClCE,mBAAmB,CAAC,IAAI,CAAC;MAC3B;IACF,CAAC,MAAM;MACLI,qBAAqB,CAAC,KAAK,CAAC;MAC5BF,iBAAiB,CAAC,EAAE,CAAC;MACrB,IAAIP,MAAM,CAAC0B,MAAM,KAAK,CAAC,IAAI,CAAC5B,WAAW,EAAE;QACvCS,iBAAiB,CAAC,uCAAuC,CAAC;QAC1DE,qBAAqB,CAAC,IAAI,CAAC;QAC3B;MACF;MACA;MACA,IAAI;QACF,MAAMY,GAAG,GAAG,MAAM9C,KAAK,CAAC+C,GAAG,CAAC,sCAAsCxB,WAAW,EAAE,EAAE;UAAE0B,eAAe,EAAE;QAAK,CAAC,CAAC;QAC3G,IAAI,CAACH,GAAG,CAACI,IAAI,IAAI,CAACJ,GAAG,CAACI,IAAI,CAACoC,EAAE,EAAE;UAC7BtD,iBAAiB,CAAC,mBAAmB,CAAC;UACtCE,qBAAqB,CAAC,IAAI,CAAC;UAC3B;QACF;MACF,CAAC,CAAC,OAAOkB,GAAG,EAAE;QACZpB,iBAAiB,CAAC,mBAAmB,CAAC;QACtCE,qBAAqB,CAAC,IAAI,CAAC;QAC3B;MACF;MACA,MAAMuD,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BjE,MAAM,CAACkE,OAAO,CAACC,KAAK,IAAI;QACtBH,QAAQ,CAACI,MAAM,CAAC,QAAQ,EAAED,KAAK,CAAC;MAClC,CAAC,CAAC;MACFH,QAAQ,CAACI,MAAM,CAAC,SAAS,EAAEtE,WAAW,CAAC;MACvC,IAAI;QACF,MAAMvB,KAAK,CAAC8F,IAAI,CAAC,kCAAkC,EAAEL,QAAQ,EAAE;UAC7DxC,eAAe,EAAE,IAAI;UACrB8C,OAAO,EAAE;YACP,cAAc,EAAE;UAClB;QACF,CAAC,CAAC;QACF/D,iBAAiB,CAAC,oBAAoB,CAAC;QACvCE,qBAAqB,CAAC,IAAI,CAAC;QAC3BR,SAAS,CAAC,EAAE,CAAC;QACbF,cAAc,CAAC,EAAE,CAAC;MACpB,CAAC,CAAC,OAAO4B,GAAG,EAAE;QACZpB,iBAAiB,CAAC,iBAAiB,CAAC;QACpCE,qBAAqB,CAAC,IAAI,CAAC;MAC7B;IACF;EACF,CAAC;;EAED;EACA,MAAM8D,sBAAsB,GAAI7B,CAAC,IAAK;IACpCvD,QAAQ,CAACuD,CAAC,CAACI,MAAM,CAACE,KAAK,CAAC;IACxB3C,mBAAmB,CAAC,KAAK,CAAC;EAC5B,CAAC;EACD,MAAMmE,uBAAuB,GAAI9B,CAAC,IAAK;IACrC3C,cAAc,CAAC2C,CAAC,CAACI,MAAM,CAACE,KAAK,CAAC;IAC9BvC,qBAAqB,CAAC,KAAK,CAAC;EAC9B,CAAC;EACD,MAAMgE,yBAAyB,GAAGA,CAAA,KAAM;IACtCpE,mBAAmB,CAAC,KAAK,CAAC;IAC1Be,kBAAkB,CAAC,CAAC;EACtB,CAAC;EACD,MAAMsD,wBAAwB,GAAI7C,OAAO,IAAK;IAC5CxB,mBAAmB,CAAC,KAAK,CAAC;IAC1BuB,iBAAiB,CAACC,OAAO,CAAC;EAC5B,CAAC;EACD,MAAM8C,0BAA0B,GAAInC,SAAS,IAAK;IAChDnC,mBAAmB,CAAC,KAAK,CAAC;IAC1BkC,mBAAmB,CAACC,SAAS,CAAC;EAChC,CAAC;EAED,oBACE9D,OAAA;IAAKkG,SAAS,EAAEpG,MAAM,CAACqG,eAAgB;IAAAC,QAAA,gBACrCpG,OAAA;MAAKkG,SAAS,EAAEpG,MAAM,CAACuG,WAAY;MAAAD,QAAA,EAAC;IAAU;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAEpDzG,OAAA;MAAKkG,SAAS,EAAEpG,MAAM,CAAC4G,MAAO;MAAAN,QAAA,gBAC5BpG,OAAA;QACE2G,IAAI,EAAC,QAAQ;QACbT,SAAS,EAAE5F,GAAG,KAAK,OAAO,GAAG,GAAGR,MAAM,CAAC8G,MAAM,IAAI9G,MAAM,CAAC+G,WAAW,EAAE,GAAG/G,MAAM,CAAC8G,MAAO;QACtFE,OAAO,EAAEA,CAAA,KAAMvG,MAAM,CAAC,OAAO,CAAE;QAAA6F,QAAA,EAChC;MAED;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACTzG,OAAA;QACE2G,IAAI,EAAC,QAAQ;QACbT,SAAS,EAAE5F,GAAG,KAAK,SAAS,GAAG,GAAGR,MAAM,CAAC8G,MAAM,IAAI9G,MAAM,CAAC+G,WAAW,EAAE,GAAG/G,MAAM,CAAC8G,MAAO;QACxFE,OAAO,EAAEA,CAAA,KAAMvG,MAAM,CAAC,SAAS,CAAE;QAAA6F,QAAA,EAClC;MAED;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,EAELnG,GAAG,KAAK,OAAO,iBACdN,OAAA,CAAAE,SAAA;MAAAkG,QAAA,gBACEpG,OAAA;QAAKkG,SAAS,EAAEpG,MAAM,CAACiH,SAAU;QAAAX,QAAA,gBAC/BpG,OAAA;UACEkG,SAAS,EAAE,GAAGpG,MAAM,CAACkH,SAAS,IAAIlH,MAAM,CAACmH,WAAW,EAAG;UACvDC,WAAW,EAAC,8DAA+B;UAC3C5C,KAAK,EAAE9D,KAAM;UACb2G,QAAQ,EAAEtB;QAAuB;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClC,CAAC,eACFzG,OAAA;UAAQkG,SAAS,EAAEpG,MAAM,CAACsH,SAAU;UAACT,IAAI,EAAC,QAAQ;UAACG,OAAO,EAAEf,yBAA0B;UAACsB,QAAQ,EAAErF,OAAQ;UAAAoE,QAAA,EAAC;QAE1G;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,EACL/F,MAAM,CAACsC,MAAM,GAAG,CAAC,iBAChBhD,OAAA;QAAKsH,KAAK,EAAE;UAAEC,YAAY,EAAE;QAAG,CAAE;QAAAnB,QAAA,gBAC/BpG,OAAA;UAAKsH,KAAK,EAAE;YAAEC,YAAY,EAAE,CAAC;YAAEC,UAAU,EAAE;UAAI,CAAE;UAAApB,QAAA,EAAC;QAAiB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACzEzG,OAAA;UAAKsH,KAAK,EAAE;YAAEG,OAAO,EAAE,MAAM;YAAEC,QAAQ,EAAE,MAAM;YAAEC,GAAG,EAAE;UAAE,CAAE;UAAAvB,QAAA,EACvD1F,MAAM,CAAC4C,GAAG,CAACsE,KAAK,iBACf5H,OAAA;YAEE2G,IAAI,EAAC,QAAQ;YACbT,SAAS,EAAEtF,aAAa,KAAKgH,KAAK,CAACzC,EAAE,GAAG,GAAGrF,MAAM,CAAC+H,WAAW,IAAI/H,MAAM,CAACsH,SAAS,EAAE,GAAGtH,MAAM,CAACsH,SAAU;YACvGN,OAAO,EAAEA,CAAA,KAAMd,wBAAwB,CAAC4B,KAAK,CAACzC,EAAE,CAAE;YAAAiB,QAAA,EAEjDwB,KAAK,CAACzC;UAAE,GALJyC,KAAK,CAACzC,EAAE;YAAAmB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAMP,CACT;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN,EACAzF,QAAQ,CAACgC,MAAM,GAAG,CAAC,iBAClBhD,OAAA;QAAKsH,KAAK,EAAE;UAAEC,YAAY,EAAE;QAAG,CAAE;QAAAnB,QAAA,gBAC/BpG,OAAA;UAAKsH,KAAK,EAAE;YAAEC,YAAY,EAAE,CAAC;YAAEC,UAAU,EAAE;UAAI,CAAE;UAAApB,QAAA,EAAC;QAAc;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACtEzG,OAAA;UAAKsH,KAAK,EAAE;YAAEG,OAAO,EAAE,MAAM;YAAEC,QAAQ,EAAE,MAAM;YAAEC,GAAG,EAAE;UAAE,CAAE;UAAAvB,QAAA,EACvDpF,QAAQ,CAACsC,GAAG,CAACwE,OAAO,iBACnB9H,OAAA;YAEE2G,IAAI,EAAC,QAAQ;YACbT,SAAS,EAAEhF,eAAe,KAAK4G,OAAO,CAAC3C,EAAE,GAAG,GAAGrF,MAAM,CAAC+H,WAAW,IAAI/H,MAAM,CAACsH,SAAS,EAAE,GAAGtH,MAAM,CAACsH,SAAU;YAC3GN,OAAO,EAAEA,CAAA,KAAMb,0BAA0B,CAAC6B,OAAO,CAAC3C,EAAE,CAAE;YAAAiB,QAAA,EAErD0B,OAAO,CAAC3C;UAAE,GALN2C,OAAO,CAAC3C,EAAE;YAAAmB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAMT,CACT;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA,eACD,CACH,EAEAnG,GAAG,KAAK,SAAS,iBAChBN,OAAA;MAAKkG,SAAS,EAAEpG,MAAM,CAACiH,SAAU;MAAAX,QAAA,eAC/BpG,OAAA;QACEkG,SAAS,EAAE,GAAGpG,MAAM,CAACkH,SAAS,IAAIlH,MAAM,CAACmH,WAAW,EAAG;QACvDC,WAAW,EAAC,oCAAkB;QAC9B5C,KAAK,EAAElD,WAAY;QACnB+F,QAAQ,EAAErB;MAAwB;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CACN,eAEDzG,OAAA;MAAKkG,SAAS,EAAEpG,MAAM,CAACiH,SAAU;MAACO,KAAK,EAAE;QAAEC,YAAY,EAAE;MAAG,CAAE;MAAAnB,QAAA,gBAC5DpG,OAAA;QACEkG,SAAS,EAAE,GAAGpG,MAAM,CAACkH,SAAS,IAAIlH,MAAM,CAACmH,WAAW,EAAG;QACvDC,WAAW,EAAC,mFAAmC;QAC/C5C,KAAK,EAAEpC,WAAY;QACnBiF,QAAQ,EAAEnD,CAAC,IAAI7B,cAAc,CAAC6B,CAAC,CAACI,MAAM,CAACE,KAAK;MAAE;QAAAgC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC/C,CAAC,eACFzG,OAAA;QAAQkG,SAAS,EAAEpG,MAAM,CAACsH,SAAU;QAACT,IAAI,EAAC,QAAQ;QAACG,OAAO,EAAEjC,uBAAwB;QAAAuB,QAAA,EAAC;MAErF;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,EACLjE,YAAY,iBAAIxC,OAAA;MAAKkG,SAAS,EAAEpG,MAAM,CAACiI,aAAc;MAAA3B,QAAA,EAAE5D;IAAY;MAAA8D,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EAC1ErE,aAAa,CAACY,MAAM,GAAG,CAAC,iBACvBhD,OAAA;MAAKsH,KAAK,EAAE;QAAEC,YAAY,EAAE;MAAG,CAAE;MAAAnB,QAAA,gBAC/BpG,OAAA;QAAKsH,KAAK,EAAE;UAAEC,YAAY,EAAE,CAAC;UAAEC,UAAU,EAAE;QAAI,CAAE;QAAApB,QAAA,EAAC;MAA6B;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACrFzG,OAAA;QAAKsH,KAAK,EAAE;UAAEG,OAAO,EAAE,MAAM;UAAEC,QAAQ,EAAE,MAAM;UAAEC,GAAG,EAAE;QAAG,CAAE;QAAAvB,QAAA,EACxDhE,aAAa,CAACkB,GAAG,CAACwE,OAAO,iBACxB9H,OAAA;UAAwBsH,KAAK,EAAE;YAAEG,OAAO,EAAE,MAAM;YAAEO,UAAU,EAAE,QAAQ;YAAEL,GAAG,EAAE,CAAC;YAAEM,UAAU,EAAE,SAAS;YAAEC,YAAY,EAAE,CAAC;YAAEC,OAAO,EAAE,UAAU;YAAEC,MAAM,EAAE;UAAU,CAAE;UAAAhC,QAAA,gBAC/JpG,OAAA;YACE2G,IAAI,EAAC,UAAU;YACf0B,OAAO,EAAE/F,gBAAgB,CAAC4C,QAAQ,CAAC4C,OAAO,CAAC3C,EAAE,CAAE;YAC/CgC,QAAQ,EAAEA,CAAA,KAAMlC,mBAAmB,CAAC6C,OAAO,CAAC3C,EAAE,CAAE;YAChDmC,KAAK,EAAE;cAAEgB,WAAW,EAAE;YAAU;UAAE;YAAAhC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnC,CAAC,eACFzG,OAAA;YAAAoG,QAAA,GAAO0B,OAAO,CAAC3C,EAAE,EAAC,KAAG,EAAC2C,OAAO,CAACS,IAAI;UAAA;YAAAjC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA,GAPhCqB,OAAO,CAAC3C,EAAE;UAAAmB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAQf,CACR;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,EAEAvE,WAAW,IAAII,gBAAgB,CAACU,MAAM,GAAG,CAAC,iBACzChD,OAAA;MAAMkG,SAAS,EAAEpG,MAAM,CAAC0I,UAAW;MAACC,QAAQ,EAAErD,YAAa;MAAAgB,QAAA,gBACzDpG,OAAA;QAAKkG,SAAS,EAAEpG,MAAM,CAAC4I;MAAc;QAAApC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAC5CzG,OAAA;QAAKkG,SAAS,EAAEpG,MAAM,CAACiH,SAAU;QAAAX,QAAA,gBAC/BpG,OAAA;UACE2G,IAAI,EAAC,MAAM;UACXgC,MAAM,EAAC,SAAS;UAChBC,QAAQ;UACRtB,KAAK,EAAE;YAAEG,OAAO,EAAE;UAAO,CAAE;UAC3BtC,EAAE,EAAC,aAAa;UAChBgC,QAAQ,EAAEpD;QAAiB;UAAAuC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5B,CAAC,eACFzG,OAAA;UAAO6I,OAAO,EAAC,aAAa;UAAC3C,SAAS,EAAEpG,MAAM,CAACgJ,eAAgB;UAAA1C,QAAA,EAAC;QAEhE;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,EACPnF,MAAM,CAAC0B,MAAM,GAAG,CAAC,iBAChBhD,OAAA;UACE2G,IAAI,EAAC,QAAQ;UACbG,OAAO,EAAElC,qBAAsB;UAC/BsB,SAAS,EAAEpG,MAAM,CAACiJ,YAAa;UAAA3C,QAAA,EAChC;QAED;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CACT;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,EACLnF,MAAM,CAAC0B,MAAM,GAAG,CAAC,iBAChBhD,OAAA;QAAIkG,SAAS,EAAEpG,MAAM,CAACkJ,SAAU;QAAA5C,QAAA,EAC7B9E,MAAM,CAACgC,GAAG,CAAC,CAACmC,KAAK,EAAEwD,GAAG,kBACrBjJ,OAAA;UAAckG,SAAS,EAAEpG,MAAM,CAACoJ,SAAU;UAAA9C,QAAA,gBACxCpG,OAAA;YACEmJ,GAAG,EAAEC,GAAG,CAACC,eAAe,CAAC5D,KAAK,CAAE;YAChC6D,GAAG,EAAE7D,KAAK,CAAC8C,IAAK;YAChBrC,SAAS,EAAEpG,MAAM,CAACyJ;UAAW;YAAAjD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC9B,CAAC,eACFzG,OAAA;YAAQ2G,IAAI,EAAC,QAAQ;YAACG,OAAO,EAAEA,CAAA,KAAMvC,iBAAiB,CAAC0E,GAAG,CAAE;YAAC/C,SAAS,EAAEpG,MAAM,CAAC0J,cAAe;YAAApD,QAAA,EAAC;UAAC;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA,GANlGwC,GAAG;UAAA3C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAOR,CACL;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CACL,eACDzG,OAAA;QAAQkG,SAAS,EAAEpG,MAAM,CAACsH,SAAU;QAACT,IAAI,EAAC,QAAQ;QAAAP,QAAA,EAAC;MAAM;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC9D,CACP,EAEAnG,GAAG,KAAK,OAAO,IAAIoB,gBAAgB,IAAIF,YAAY,KAClDA,YAAY,CAAC0D,QAAQ,CAAC,YAAY,CAAC,gBACjClF,OAAA;MAAKkG,SAAS,EAAEpG,MAAM,CAAC2J,aAAc;MAAArD,QAAA,EAAE5E;IAAY;MAAA8E,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,gBAE1DzG,OAAA;MAAKkG,SAAS,EAAEpG,MAAM,CAACiI,aAAc;MAAA3B,QAAA,EAAE5E;IAAY;MAAA8E,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAC1D,CACF,EACAnG,GAAG,KAAK,SAAS,IAAIwB,kBAAkB,IAAIF,cAAc,KACxDA,cAAc,CAACsD,QAAQ,CAAC,YAAY,CAAC,gBACnClF,OAAA;MAAKkG,SAAS,EAAEpG,MAAM,CAAC2J,aAAc;MAAArD,QAAA,EAAExE;IAAc;MAAA0E,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,gBAE5DzG,OAAA;MAAKkG,SAAS,EAAEpG,MAAM,CAACiI,aAAc;MAAA3B,QAAA,EAAExE;IAAc;MAAA0E,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAC5D,CACF;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAACpG,EAAA,CApZQF,MAAM;AAAAuJ,EAAA,GAANvJ,MAAM;AAsZf,eAAeA,MAAM;AAAC,IAAAuJ,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}